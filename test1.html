<!DOCTYPE html>
<html>
<head>
<title>AH Army Lab - Pro Test</title>
<style>
body{
  font-family:Arial;
  background:#111;
  color:white;
  margin:0;
  padding:0;
}
header{
  background:#1c1c1c;
  padding:15px;
  text-align:center;
  font-size:20px;
  font-weight:bold;
}
.container{
  display:flex;
}
.sidebar{
  width:25%;
  background:#1a1a1a;
  padding:10px;
  height:90vh;
  overflow:auto;
}
.sidebar button{
  width:40px;
  height:40px;
  margin:5px;
  border:none;
  border-radius:5px;
  background:#444;
  color:white;
}
.sidebar button.active{
  background:orange;
}
.main{
  width:75%;
  padding:20px;
}
.option{
  background:#222;
  padding:10px;
  margin:8px 0;
  border-radius:5px;
}
.option:hover{
  background:#333;
}
.controls button{
  padding:8px 15px;
  margin:5px;
  border:none;
  border-radius:5px;
}
.correct{background:green;padding:5px;margin:3px}
.wrong{background:red;padding:5px;margin:3px}
.na{background:orange;padding:5px;margin:3px}
</style>
</head>
<body>

<header>
ü™ñ AH Army Lab - Agniveer Full Test  
<br>
‚è± <span id="mainTimer">30:00</span> |
üïí Q Time: <span id="qTimer">0</span>s
</header>

<div class="container">

<div class="sidebar" id="numbers"></div>

<div class="main">
<h3 id="qText"></h3>
<div id="options"></div>

<div class="controls">
<button onclick="prevQ()">Previous</button>
<button onclick="saveNext()">Save & Next</button>
<button onclick="nextQ()">Next</button>
<button onclick="submitTest()">Submit</button>
</div>

<hr>
<h3>üìä Analysis</h3>
<div id="analysis"></div>

<h3>üìò Solutions</h3>
<div id="solutions"></div>

<h3>üèÜ Leaderboard</h3>
<div id="leaderboard"></div>

</div>
</div>

<script>

let currentQ=0;
let answers={};
let totalTime=1800;
let qTime=0;
let qInterval;

const questions = Array.from({length:50},(_,i)=>[
`Question Number ${i+1}?`,
["Option A","Option B","Option C","Option D"],
"A",
"Yeh iska solution explanation hai."
]);

function loadNumbers(){
let div=document.getElementById("numbers");
for(let i=0;i<questions.length;i++){
let btn=document.createElement("button");
btn.innerText=i+1;
btn.onclick=()=>{currentQ=i;showQ();};
div.appendChild(btn);
}
}

function showQ(){
document.getElementById("qText").innerText=
"Q"+(currentQ+1)+". "+questions[currentQ][0];

let optDiv=document.getElementById("options");
optDiv.innerHTML="";
questions[currentQ][1].forEach((opt,i)=>{
let letter=String.fromCharCode(65+i);
optDiv.innerHTML+=
`<div class="option">
<input type="radio" name="opt" value="${letter}"
${answers[currentQ]===letter?"checked":""}>
 ${opt}
</div>`;
});

document.querySelectorAll(".sidebar button")
.forEach(b=>b.classList.remove("active"));
document.querySelectorAll(".sidebar button")[currentQ]
.classList.add("active");

startQTimer();
}

function nextQ(){
if(currentQ<questions.length-1){
currentQ++;
showQ();
}
}

function prevQ(){
if(currentQ>0){
currentQ--;
showQ();
}
}

function saveNext(){
let sel=document.querySelector('input[name="opt"]:checked');
if(sel){answers[currentQ]=sel.value;}
nextQ();
}

function startMainTimer(){
setInterval(()=>{
if(totalTime<=0){submitTest();}
else{
totalTime--;
let m=Math.floor(totalTime/60);
let s=totalTime%60;
document.getElementById("mainTimer").innerText=
(m<10?"0":"")+m+":"+(s<10?"0":"")+s;
}
},1000);
}

function startQTimer(){
qTime=0;
clearInterval(qInterval);
qInterval=setInterval(()=>{
qTime++;
document.getElementById("qTimer").innerText=qTime;
},1000);
}

function submitTest(){
clearInterval(qInterval);
let score=0;
let analysisHTML="";
let solutionHTML="";

questions.forEach((q,i)=>{
let user=answers[i];
let correct=q[2];

if(!user){
analysisHTML+=`<div class="na">Q${i+1} Not Attempted</div>`;
}
else if(user===correct){
score+=2;
analysisHTML+=`<div class="correct">Q${i+1} Correct</div>`;
}
else{
analysisHTML+=`<div class="wrong">Q${i+1} Wrong</div>`;
}

solutionHTML+=`<div>
<b>Q${i+1}:</b> ${q[0]}<br>
Correct: ${correct}<br>
Solution: ${q[3]}
</div><hr>`;
});

document.getElementById("analysis").innerHTML=analysisHTML;
document.getElementById("solutions").innerHTML=solutionHTML;

let name=prompt("Apna naam daalo:");
let board=JSON.parse(localStorage.getItem("board")||"[]");
board.push({name,score});
board.sort((a,b)=>b.score-a.score);
localStorage.setItem("board",JSON.stringify(board));

let lb="";
board.slice(0,10).forEach((p,i)=>{
lb+=`${i+1}. ${p.name} - ${p.score}<br>`;
});
document.getElementById("leaderboard").innerHTML=lb;
}

loadNumbers();
showQ();
startMainTimer();

</script>

</body>
</html>
